{
    "entities": {
        "userProfile": {
            "title": "User Profile",
            "description": "Represents a user's profile information.",
            "type": "object",
            "properties": {
                "name": {
                    "type": "string",
                    "description": "The user's full name."
                },
                "email": {
                    "type": "string",
                    "format": "email",
                    "description": "The user's email address."
                },
                "avatarUrl": {
                    "type": "string",
                    "description": "URL for the user's avatar image."
                },
                "isActivated": {
                    "type": "boolean",
                    "description": "Whether the user has activated their account with a code."
                },
                "activatedUntil": {
                    "type": "string",
                    "format": "date-time",
                    "description": "The date when the user's access expires."
                },
                "migrationCompleted": {
                    "type": "boolean",
                    "description": "Whether the one-time data migration/summarization has been completed for this user."
                }
            },
            "required": ["name", "email", "isActivated"]
        },
        "client": {
            "title": "Client",
            "description": "Represents a client of the auto detailing shop.",
            "type": "object",
            "properties": {
                "name": {
                    "type": "string",
                    "description": "The client's full name."
                },
                "email": {
                    "type": "string",
                    "format": "email",
                    "description": "The client's email address."
                },
                "phone": {
                    "type": "string",
                    "description": "The client's phone number."
                },
                "createdAt": {
                    "type": "string",
                    "format": "date-time",
                    "description": "The date the client was added."
                },
                "avatarUrl": {
                    "type": "string",
                    "description": "URL for the client's avatar image."
                },
                "avatarHint": {
                    "type": "string",
                    "description": "A hint for AI to find a similar avatar image."
                }
            },
            "required": ["name", "createdAt"]
        },
        "vehicle": {
            "title": "Vehicle",
            "description": "Represents a client's vehicle.",
            "type": "object",
            "properties": {
                "make": {
                    "type": "string",
                    "description": "The make of the vehicle (e.g., Honda, Toyota)."
                },
                "model": {
                    "type": "string",
                    "description": "The model of the vehicle (e.g., Civic, Corolla)."
                },
                "year": {
                    "type": "number",
                    "description": "The manufacturing year of the vehicle."
                },
                "licensePlate": {
                    "type": "string",
                    "description": "The vehicle's license plate."
                },
                "imageUrl": {
                    "type": "string",
                    "description": "URL for the vehicle's image."
                },
                "imageHint": {
                    "type": "string",
                    "description": "A hint for AI to find a similar vehicle image."
                }
            },
            "required": ["make", "model", "year"]
        },
        "serviceRecord": {
            "title": "Service Record",
            "description": "Represents a service performed on a vehicle.",
            "type": "object",
            "properties": {
                "serviceType": {
                    "type": "string",
                    "description": "The type of service performed (e.g., Polimento TÃ©cnico)."
                },
                "date": {
                    "type": "string",
                    "format": "date-time",
                    "description": "The date the service was performed."
                },
                "notes": {
                    "type": "string",
                    "description": "Additional notes about the service."
                },
                "cost": {
                    "type": "number",
                    "description": "The cost of the service."
                },
                "durationDays": {
                    "type": "number",
                    "description": "The duration of the service in days."
                },
                "expirationDate": {
                    "type": "string",
                    "format": "date-time",
                    "description": "The calculated expiration date of the service."
                },
                "imageUrl": {
                    "type": "string",
                    "description": "URL of the photo taken after the service."
                },
                "isRenewed": {
                    "type": "boolean",
                    "description": "Indicates if the service has been renewed."
                }
            },
            "required": ["serviceType", "date", "cost", "durationDays", "expirationDate"]
        },
        "activationCode": {
            "title": "Activation Code",
            "description": "Represents a one-time code to activate a user account for a specific duration.",
            "type": "object",
            "properties": {
                "code": {
                    "type": "string",
                    "description": "The unique activation code."
                },
                "durationDays": {
                    "type": "number",
                    "description": "The duration of access in days."
                },
                "createdAt": {
                    "type": "string",
                    "format": "date-time",
                    "description": "The date the code was created."
                },
                "isUsed": {
                    "type": "boolean",
                    "description": "Whether the code has been used."
                },
                "usedBy": {
                    "type": "string",
                    "description": "The UID of the user who used the code."
                },
                "usedAt": {
                    "type": "string",
                    "format": "date-time",
                    "description": "The date the code was used."
                }
            },
            "required": ["code", "durationDays", "createdAt", "isUsed"]
        },
        "userSummary": {
            "title": "User Summary",
            "description": "Aggregated data for a user for quick dashboard display.",
            "type": "object",
            "properties": {
                "totalRevenue": { "type": "number" },
                "totalClients": { "type": "number" },
                "totalServices": { "type": "number" },
                "clientGrowth": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "month": { "type": "string", "description": "Format YYYY-MM" },
                            "clients": { "type": "number" }
                        }
                    }
                },
                "lastUpdated": { "type": "string", "format": "date-time" }
            },
            "required": ["totalRevenue", "totalClients", "totalServices", "lastUpdated"]
        },
        "monthlyRevenue": {
            "title": "Monthly Revenue",
            "description": "Represents the total revenue for a specific month.",
            "type": "object",
            "properties": {
                "id": { "type": "string", "description": "ID in YYYY-MM format." },
                "month": { "type": "string", "description": "Month in YYYY-MM format." },
                "revenue": { "type": "number" }
            },
            "required": ["id", "month", "revenue"]
        }
    },
    "auth": {
        "providers": ["password"]
    },
    "firestore": {
        "/users/{userId}": {
            "schema": {
                "$ref": "#/entities/userProfile"
            },
            "description": "Stores user profile information."
        },
        "/users/{userId}/summary/allTime": {
            "schema": { "$ref": "#/entities/userSummary" },
            "description": "A single document containing aggregated data for the user."
        },
        "/users/{userId}/monthlyRevenues/{year_month}": {
            "schema": { "$ref": "#/entities/monthlyRevenue" },
            "description": "Stores total revenue for a specific month."
        },
        "/activationCodes/{codeId}": {
            "schema": {
                "$ref": "#/entities/activationCode"
            },
            "description": "Stores account activation codes."
        },
        "/users/{userId}/clients/{clientId}": {
            "schema": {
                "$ref": "#/entities/client"
            },
            "description": "Stores client information for a specific user."
        },
        "/users/{userId}/clients/{clientId}/vehicles/{vehicleId}": {
            "schema": {
                "$ref": "#/entities/vehicle"
            },
            "description": "Stores vehicles for a specific client."
        },
        "/users/{userId}/clients/{clientId}/vehicles/{vehicleId}/serviceHistory/{serviceId}": {
            "schema": {
                "$ref": "#/entities/serviceRecord"
            },
            "description": "Stores the service history for a specific vehicle."
        }
    }
}
